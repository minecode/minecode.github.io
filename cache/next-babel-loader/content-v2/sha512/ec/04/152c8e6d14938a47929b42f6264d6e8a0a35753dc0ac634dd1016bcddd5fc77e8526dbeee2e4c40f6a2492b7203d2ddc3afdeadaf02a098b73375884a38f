{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _slicedToArray from \"/home/runner/work/website/website/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState, useEffect } from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport { getDate, getCard, getHeader, getElement, getDiffDates } from '../../../../components/Utils';\nimport { faStar, faCertificate } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { useRouter } from 'next/router';\n\nvar post = function post() {\n  var _useState = useState(null),\n      post = _useState[0],\n      setPost = _useState[1];\n\n  var _useState2 = useState(null),\n      comments = _useState2[0],\n      setComments = _useState2[1];\n\n  var _useState3 = useState(null),\n      labels = _useState3[0],\n      setLabels = _useState3[1];\n\n  var _useState4 = useState(null),\n      authorizedUsers = _useState4[0],\n      setAuthorizedUsers = _useState4[1];\n\n  var _useState5 = useState(null),\n      coAuthors = _useState5[0],\n      setCoAuthors = _useState5[1];\n\n  var _useState6 = useState(null),\n      relatedPosts = _useState6[0],\n      setRelatedPosts = _useState6[1];\n\n  var _useState7 = useState(null),\n      hoverElement = _useState7[0],\n      setHoverElement = _useState7[1];\n\n  var router = useRouter();\n  var id = router.query.id;\n  useEffect(function () {\n    if (id != undefined) {\n      var header = getHeader();\n      Promise.all([fetch('https://minecode.herokuapp.com/github/repos/minecode/minecode.github.io/issues/' + id, {\n        method: 'GET',\n        headers: header\n      }), fetch('https://minecode.herokuapp.com/github/repos/minecode/minecode.github.io/issues/' + id + '/comments', {\n        method: 'GET',\n        headers: header\n      }), fetch('https://minecode.herokuapp.com/github/orgs/minecode/members', {\n        method: 'GET',\n        headers: header\n      }), fetch('https://minecode.herokuapp.com/github/repos/minecode/minecode.github.io/issues/closed', {\n        method: 'GET',\n        headers: header\n      })]).then(function (_ref) {\n        var _ref2 = _slicedToArray(_ref, 4),\n            res1 = _ref2[0],\n            res2 = _ref2[1],\n            res3 = _ref2[2],\n            res4 = _ref2[3];\n\n        return Promise.all([res1.json(), res2.json(), res3.json(), res4.json()]);\n      }).then(function (_ref3) {\n        var _ref4 = _slicedToArray(_ref3, 4),\n            data1 = _ref4[0],\n            data2 = _ref4[1],\n            data3 = _ref4[2],\n            data4 = _ref4[3];\n\n        console.log(data1);\n        console.log(data2);\n        console.log(data3);\n        console.log(data4);\n        setPost(data1);\n        setComments(data2);\n        setLabels(data1.labels);\n        setAuthorizedUsers(data3.map(function (element) {\n          return element.login;\n        }));\n        setCoAuthors(data1.assignees.filter(function (element2) {\n          return element2.login !== data1.user.login;\n        }));\n        setRelatedPosts(data4.filter(function (element2) {\n          if (element2.user.login === data1.user.login && element2.labels.filter(function (element) {\n            return element.name === 'post';\n          }).length > 0 && element2.id !== data1.id) {\n            return true;\n          } else {\n            return false;\n          }\n        }));\n      });\n    }\n  }, [id]);\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: post && authorizedUsers && labels && [post].map(function (element, i) {\n      if (labels.length > 0 && element.state === 'closed' && labels.filter(function (element) {\n        return element.name === 'post';\n      }) && authorizedUsers.includes(element.closed_by.login)) {\n        var bannerImage = [];\n\n        if (element.body.match(/(?:!\\[(.*?)\\]\\((.*?)\\))/g)) {\n          bannerImage = element.body.match(/(?:!\\[(.*?)\\]\\((.*?)\\))/g)[0].split('(')[1].split(')')[0];\n        }\n\n        return /*#__PURE__*/_jsxs(_Fragment, {\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            style: {\n              boxSizing: 'border-box',\n              position: 'relative',\n              height: '400px',\n              width: '100%',\n              overflow: 'hidden'\n            },\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \"container-fluid\",\n              id: \"content\",\n              style: {\n                backgroundImage: \"url(\".concat(bannerImage, \")\"),\n                backgroundSize: 'cover',\n                backgroundRepeat: 'no-repeat',\n                backgroundPosition: 'center',\n                filter: 'blur(8px)',\n                height: '100%',\n                width: '100%',\n                position: 'absolute'\n              }\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \"container-fluid\",\n              style: {\n                backgroundColor: 'rgb(0,0,0,0.5)',\n                color: 'white',\n                fontWeight: 'bold',\n                zIndex: '2',\n                height: '100%',\n                width: '100%',\n                textAlign: 'center',\n                position: 'relative'\n              },\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                className: \"pricing-header px-3 py-3 mx-auto text-center\",\n                id: \"title\",\n                children: /*#__PURE__*/_jsxs(\"h1\", {\n                  className: \"display-4\",\n                  style: {\n                    color: '#fff',\n                    marginTop: '5%'\n                  },\n                  children: [element.title.split(/\\[\\w*\\] /)[1], /*#__PURE__*/_jsx(\"br\", {}), element.labels.filter(function (e) {\n                    return e.name === 'highlight';\n                  }).length > 0 ? /*#__PURE__*/_jsx(_Fragment, {\n                    children: /*#__PURE__*/_jsxs(\"div\", {\n                      className: \"m-1 btn btn-outline-light btn-sm bordered\",\n                      children: [/*#__PURE__*/_jsx(FontAwesomeIcon, {\n                        icon: faStar\n                      }), ' ', \"Destaque\"]\n                    })\n                  }) : /*#__PURE__*/_jsx(_Fragment, {}), getDiffDates(new Date(element.closed_at), new Date()) <= 2 ? /*#__PURE__*/_jsx(_Fragment, {\n                    children: /*#__PURE__*/_jsxs(\"div\", {\n                      className: \"m-1 btn btn-outline-light btn-sm bordered\",\n                      children: [/*#__PURE__*/_jsx(FontAwesomeIcon, {\n                        icon: faCertificate\n                      }), ' ', \"Novo\"]\n                    })\n                  }) : /*#__PURE__*/_jsx(_Fragment, {})]\n                })\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"px-3 py-3 pb-md-4 mx-auto text-center\",\n                children: /*#__PURE__*/_jsx(\"div\", {\n                  className: \"d-flex align-middle justify-content-center align-items-center\",\n                  children: post && [post].map(function (element, i) {\n                    return /*#__PURE__*/_jsx(\"div\", {\n                      className: \"row\",\n                      children: /*#__PURE__*/_jsx(\"div\", {\n                        className: \"align-self-center p-2\",\n                        id: \"infoPost\",\n                        children: /*#__PURE__*/_jsxs(\"p\", {\n                          style: {\n                            color: '#fff',\n                            fontSize: 16\n                          },\n                          children: [\"Posted on \", getDate(element.created_at), \" by\", /*#__PURE__*/_jsxs(\"a\", {\n                            className: \"mt-3 mb-4 btn btn-sm\",\n                            href: 'https://github.com/' + element.user.login,\n                            target: \"_blank\",\n                            rel: \"noopener noreferrer\",\n                            style: {\n                              color: '#fff'\n                            },\n                            children: [element.user.login, \" \", /*#__PURE__*/_jsx(\"img\", {\n                              className: \"rounded-circle\",\n                              src: element.user.avatar_url,\n                              alt: \"Github\",\n                              width: \"24\",\n                              height: \"24\"\n                            })]\n                          }), coAuthors && coAuthors.length > 0 && coAuthors.map(function (element, i) {\n                            return /*#__PURE__*/_jsxs(_Fragment, {\n                              children: [i === 0 ? /*#__PURE__*/_jsx(\"span\", {\n                                style: {\n                                  opacity: 0.5\n                                },\n                                children: \"(\"\n                              }) : /*#__PURE__*/_jsx(_Fragment, {}), /*#__PURE__*/_jsx(\"span\", {\n                                style: {\n                                  opacity: 0.5\n                                },\n                                children: /*#__PURE__*/_jsxs(\"a\", {\n                                  className: \"mt-3 mb-4 btn btn-sm\",\n                                  href: 'https://github.com/' + element.login,\n                                  target: \"_blank\",\n                                  rel: \"noopener noreferrer\",\n                                  style: {\n                                    color: '#fff',\n                                    paddingRight: 0\n                                  },\n                                  children: [element.login, \" \", /*#__PURE__*/_jsx(\"img\", {\n                                    className: \"rounded-circle\",\n                                    src: element.avatar_url,\n                                    alt: \"Github\",\n                                    width: \"24\",\n                                    height: \"24\"\n                                  })]\n                                })\n                              }, i), i === coAuthors.length - 1 ? /*#__PURE__*/_jsx(\"span\", {\n                                style: {\n                                  opacity: 0.5\n                                },\n                                children: \")\"\n                              }) : /*#__PURE__*/_jsx(_Fragment, {\n                                children: /*#__PURE__*/_jsx(\"span\", {\n                                  style: {\n                                    opacity: 0.5\n                                  },\n                                  children: \", \"\n                                })\n                              })]\n                            });\n                          })]\n                        })\n                      }, i)\n                    }, i);\n                  })\n                })\n              })]\n            })]\n          }, i), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"container\",\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \"pt-md-5 pb-md-4 mx-auto\",\n              id: \"post\",\n              children: /*#__PURE__*/_jsxs(\"div\", {\n                children: [/*#__PURE__*/_jsx(ReactMarkdown, {\n                  source: element.body\n                }), \"          \"]\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"text-center\",\n              children: labels && labels.map(function (element, i) {\n                if (element.name !== 'post' && element.name !== 'highlight') {\n                  return /*#__PURE__*/_jsx(\"a\", {\n                    href: '/blog/tag/' + element.name,\n                    className: \"m-1 btn btn-primary\",\n                    style: {\n                      backgroundColor: '#' + element.color,\n                      border: 'none'\n                    },\n                    children: element.name\n                  }, i);\n                } else {\n                  return /*#__PURE__*/_jsx(_Fragment, {});\n                }\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"mt-5 mb-5\"\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \"row justify-content-center\",\n              children: [post && [post].map(function (element, i) {\n                return /*#__PURE__*/_jsx(\"div\", {\n                  className: \"col-4 row justify-content-center\",\n                  children: /*#__PURE__*/_jsxs(\"div\", {\n                    className: \"align-self-center p-2\",\n                    children: [element.user.login, /*#__PURE__*/_jsx(\"a\", {\n                      className: \"mt-3 mb-4 btn btn-sm\",\n                      href: 'https://github.com/' + element.user.login,\n                      target: \"_blank\",\n                      rel: \"noopener noreferrer\",\n                      style: {\n                        color: '#fff'\n                      },\n                      children: /*#__PURE__*/_jsx(\"img\", {\n                        className: \"rounded-circle\",\n                        src: element.user.avatar_url,\n                        alt: \"Github\",\n                        width: \"24\",\n                        height: \"24\"\n                      })\n                    })]\n                  })\n                }, i);\n              }), coAuthors && coAuthors.map(function (element, i) {\n                return /*#__PURE__*/_jsx(\"div\", {\n                  className: \"col-4 row justify-content-center\",\n                  children: /*#__PURE__*/_jsxs(\"div\", {\n                    className: \"align-self-center p-2\",\n                    children: [element.login, /*#__PURE__*/_jsx(\"a\", {\n                      className: \"mt-3 mb-4 btn btn-sm\",\n                      href: 'https://github.com/' + element.login,\n                      target: \"_blank\",\n                      rel: \"noopener noreferrer\",\n                      style: {\n                        color: '#fff'\n                      },\n                      children: /*#__PURE__*/_jsx(\"img\", {\n                        className: \"rounded-circle\",\n                        src: element.avatar_url,\n                        alt: \"Github\",\n                        width: \"24\",\n                        height: \"24\"\n                      })\n                    })]\n                  })\n                }, i);\n              })]\n            }), comments && comments.map(function (element, i) {\n              var user = /*#__PURE__*/_jsx(\"div\", {\n                className: \"col-1 text-center\",\n                style: {\n                  zIndex: 1\n                },\n                children: /*#__PURE__*/_jsx(\"img\", {\n                  className: \"m-3 rounded-circle\",\n                  src: element.user.avatar_url,\n                  alt: \"User\",\n                  width: \"35\",\n                  height: \"35\"\n                })\n              });\n\n              var comment = /*#__PURE__*/_jsx(\"div\", {\n                className: \"col-11\",\n                children: /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"card mt-3 mb-3\",\n                  children: [/*#__PURE__*/_jsx(\"div\", {\n                    className: \"card-header\",\n                    children: /*#__PURE__*/_jsxs(\"div\", {\n                      children: [\"Posted on \", getDate(element.created_at), \" by \", element.user.login]\n                    })\n                  }), /*#__PURE__*/_jsx(\"div\", {\n                    className: \"card-body\",\n                    children: /*#__PURE__*/_jsx(ReactMarkdown, {\n                      source: element.body\n                    })\n                  })]\n                })\n              });\n\n              return /*#__PURE__*/_jsxs(_Fragment, {\n                children: [i === 0 ? /*#__PURE__*/_jsxs(_Fragment, {\n                  children: [/*#__PURE__*/_jsx(\"hr\", {\n                    className: \"mt-5 mb-5\"\n                  }), /*#__PURE__*/_jsx(\"h4\", {\n                    children: \"Comments:\"\n                  })]\n                }) : /*#__PURE__*/_jsx(_Fragment, {}), /*#__PURE__*/_jsx(\"div\", {\n                  className: \"px-3 mx-auto row\",\n                  id: \"comments\",\n                  children: /*#__PURE__*/_jsxs(\"div\", {\n                    className: \"row col-12\",\n                    children: [element.user.login === post.user.login ? user : comment, element.user.login === post.user.login ? comment : user]\n                  })\n                }, i)]\n              });\n            }), relatedPosts && relatedPosts.length > 0 && [relatedPosts[0]].map(function (element) {\n              return /*#__PURE__*/_jsxs(_Fragment, {\n                children: [/*#__PURE__*/_jsx(\"hr\", {\n                  className: \"mt-5 mb-5\"\n                }), /*#__PURE__*/_jsxs(\"h4\", {\n                  className: \"col-12 mt-5 mb-5\",\n                  children: [\"More from \", element.user.login, \":\"]\n                })]\n              });\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"row justify-content-center\",\n              children: relatedPosts && relatedPosts.length > 0 && relatedPosts.map(function (element, i) {\n                var postElement = getElement('post', element);\n                return getCard(i, postElement, hoverElement, setHoverElement);\n              })\n            })]\n          })]\n        });\n      } else {\n        return /*#__PURE__*/_jsx(_Fragment, {});\n      }\n    })\n  });\n};\n\nexport default post;","map":null,"metadata":{},"sourceType":"module"}