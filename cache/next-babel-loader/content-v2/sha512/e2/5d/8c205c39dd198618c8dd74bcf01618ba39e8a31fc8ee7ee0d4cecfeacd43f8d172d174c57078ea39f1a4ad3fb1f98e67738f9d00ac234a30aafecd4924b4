{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"/home/runner/work/website/website/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/runner/work/website/website/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport React, { useEffect, useState } from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport { getDate, getCard, getHeader, getElement, getDiffDates } from '../../../components/Utils';\nimport { faStar, faCertificate } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { useFetch } from '../../../hooks/useFetch';\nimport { useRouter } from 'next/router';\n\nvar post = function post() {\n  var router = useRouter();\n  var id = router.query.id;\n\n  var _useState = useState(null),\n      post = _useState[0],\n      setPost = _useState[1];\n\n  var _useState2 = useState(null),\n      relatedPosts = _useState2[0],\n      setRelatedPosts = _useState2[1];\n\n  var _useState3 = useState(null),\n      bannerImage = _useState3[0],\n      setBannerImage = _useState3[1];\n\n  var _useState4 = useState(null),\n      coAuthors = _useState4[0],\n      setCoAuthors = _useState4[1];\n\n  var _useState5 = useState(null),\n      hoverElement = _useState5[0],\n      setHoverElement = _useState5[1];\n\n  var _useFetch = useFetch('repos/minecode/minecode.github.io/issues/' + router.query.id + '/comments'),\n      comments = _useFetch.data;\n\n  useEffect(function () {\n    if (id != undefined) {\n      var fetchApi = /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n          var _postJson$body, _postJson$body2, _postJson$assignees;\n\n          var header, postJson, members, membersJson, authorizedUsers, otherIssues, otherIssuesJson, relatedPosts, bannerImage, coAuthors;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  header = getHeader();\n                  _context.next = 3;\n                  return fetch('https://minecode.herokuapp.com/github/repos/minecode/minecode.github.io/issues/' + id, {\n                    method: 'GET',\n                    headers: header\n                  }).then(function (res) {\n                    return res.json();\n                  }).then(function (data) {\n                    setPost(data);\n                    return data;\n                  });\n\n                case 3:\n                  postJson = _context.sent;\n                  _context.next = 6;\n                  return fetch('https://minecode.herokuapp.com/github/orgs/minecode/members', {\n                    method: 'GET',\n                    headers: header\n                  });\n\n                case 6:\n                  members = _context.sent;\n                  _context.next = 9;\n                  return members.json();\n\n                case 9:\n                  membersJson = _context.sent;\n                  authorizedUsers = membersJson.map(function (element) {\n                    return element.login;\n                  });\n                  _context.next = 13;\n                  return fetch('https://minecode.herokuapp.com/github/repos/minecode/minecode.github.io/issues/closed', {\n                    method: 'GET',\n                    headers: header\n                  });\n\n                case 13:\n                  otherIssues = _context.sent;\n                  _context.next = 16;\n                  return otherIssues.json();\n\n                case 16:\n                  otherIssuesJson = _context.sent;\n                  relatedPosts = otherIssuesJson.filter(function (element) {\n                    var _element$user, _postJson$user, _element$closed_by;\n\n                    return ((_element$user = element.user) === null || _element$user === void 0 ? void 0 : _element$user.login) === ((_postJson$user = postJson.user) === null || _postJson$user === void 0 ? void 0 : _postJson$user.login) && element.labels.filter(function (filter) {\n                      return filter.name === 'post';\n                    }).length > 0 && element.id !== postJson.id && authorizedUsers.includes((_element$closed_by = element.closed_by) === null || _element$closed_by === void 0 ? void 0 : _element$closed_by.login);\n                  });\n                  setRelatedPosts(relatedPosts);\n                  bannerImage = (_postJson$body = postJson.body) !== null && _postJson$body !== void 0 && _postJson$body.match(/(?:!\\[(.*?)\\]\\((.*?)\\))/g) ? (_postJson$body2 = postJson.body) === null || _postJson$body2 === void 0 ? void 0 : _postJson$body2.match(/(?:!\\[(.*?)\\]\\((.*?)\\))/g)[0].split('(')[1].split(')')[0] : null;\n                  setBannerImage(bannerImage);\n                  coAuthors = (_postJson$assignees = postJson.assignees) === null || _postJson$assignees === void 0 ? void 0 : _postJson$assignees.filter(function (element) {\n                    var _postJson$user2;\n\n                    return element.login !== ((_postJson$user2 = postJson.user) === null || _postJson$user2 === void 0 ? void 0 : _postJson$user2.login);\n                  });\n                  setCoAuthors(coAuthors);\n\n                case 23:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        return function fetchApi() {\n          return _ref.apply(this, arguments);\n        };\n      }();\n\n      fetchApi();\n    }\n  }, [id]);\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: post && [post].map(function (element, i) {\n      var _element$title, _element$labels, _element$user2, _element$user3, _element$user4;\n\n      return /*#__PURE__*/_jsxs(_Fragment, {\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          style: {\n            boxSizing: 'border-box',\n            position: 'relative',\n            height: '400px',\n            width: '100%',\n            overflow: 'hidden'\n          },\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"container-fluid\",\n            id: \"content\",\n            style: {\n              backgroundImage: \"url(\".concat(bannerImage, \")\"),\n              backgroundSize: 'cover',\n              backgroundRepeat: 'no-repeat',\n              backgroundPosition: 'center',\n              filter: 'blur(8px)',\n              height: '100%',\n              width: '100%',\n              position: 'absolute'\n            }\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"container-fluid\",\n            style: {\n              backgroundColor: 'rgb(0,0,0,0.5)',\n              color: 'white',\n              fontWeight: 'bold',\n              zIndex: 2,\n              height: '100%',\n              width: '100%',\n              textAlign: 'center',\n              position: 'relative'\n            },\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \"pricing-header px-3 py-3 mx-auto text-center\",\n              id: \"title\",\n              children: /*#__PURE__*/_jsxs(\"h1\", {\n                className: \"display-4\",\n                style: {\n                  color: '#fff',\n                  marginTop: '5%'\n                },\n                children: [(_element$title = element.title) === null || _element$title === void 0 ? void 0 : _element$title.split(/\\[\\w*\\] /)[1], /*#__PURE__*/_jsx(\"br\", {}), ((_element$labels = element.labels) === null || _element$labels === void 0 ? void 0 : _element$labels.filter(function (e) {\n                  return e.name === 'highlight';\n                }).length) > 0 ? /*#__PURE__*/_jsx(_Fragment, {\n                  children: /*#__PURE__*/_jsxs(\"div\", {\n                    className: \"m-1 btn btn-outline-light btn-sm bordered\",\n                    children: [/*#__PURE__*/_jsx(FontAwesomeIcon, {\n                      icon: faStar\n                    }), ' ', \"Destaque\"]\n                  })\n                }) : /*#__PURE__*/_jsx(_Fragment, {}), getDiffDates(new Date(element.closed_at), new Date()) <= 2 ? /*#__PURE__*/_jsx(_Fragment, {\n                  children: /*#__PURE__*/_jsxs(\"div\", {\n                    className: \"m-1 btn btn-outline-light btn-sm bordered\",\n                    children: [/*#__PURE__*/_jsx(FontAwesomeIcon, {\n                      icon: faCertificate\n                    }), ' ', \"Novo\"]\n                  })\n                }) : /*#__PURE__*/_jsx(_Fragment, {})]\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"px-3 py-3 pb-md-4 mx-auto text-center\",\n              children: /*#__PURE__*/_jsx(\"div\", {\n                className: \"d-flex align-middle justify-content-center align-items-center\",\n                children: /*#__PURE__*/_jsx(\"div\", {\n                  className: \"row\",\n                  children: /*#__PURE__*/_jsx(\"div\", {\n                    className: \"align-self-center p-2\",\n                    id: \"infoPost\",\n                    children: /*#__PURE__*/_jsxs(\"p\", {\n                      style: {\n                        color: '#fff',\n                        fontSize: 16\n                      },\n                      children: [\"Posted on \", getDate(element.created_at), \" by\", /*#__PURE__*/_jsxs(\"a\", {\n                        className: \"mt-3 mb-4 btn btn-sm\",\n                        href: 'https://github.com/' + ((_element$user2 = element.user) === null || _element$user2 === void 0 ? void 0 : _element$user2.login),\n                        target: \"_blank\",\n                        rel: \"noopener noreferrer\",\n                        style: {\n                          color: '#fff'\n                        },\n                        children: [(_element$user3 = element.user) === null || _element$user3 === void 0 ? void 0 : _element$user3.login, \" \", /*#__PURE__*/_jsx(\"img\", {\n                          className: \"rounded-circle\",\n                          src: (_element$user4 = element.user) === null || _element$user4 === void 0 ? void 0 : _element$user4.avatar_url,\n                          alt: \"Github\",\n                          width: \"24\",\n                          height: \"24\"\n                        })]\n                      }), coAuthors && coAuthors !== undefined && coAuthors.length > 0 && coAuthors.map(function (element, i) {\n                        return /*#__PURE__*/_jsxs(_Fragment, {\n                          children: [i === 0 ? /*#__PURE__*/_jsx(\"span\", {\n                            style: {\n                              opacity: 0.5\n                            },\n                            children: \"(\"\n                          }) : /*#__PURE__*/_jsx(_Fragment, {}), /*#__PURE__*/_jsx(\"span\", {\n                            style: {\n                              opacity: 0.5\n                            },\n                            children: /*#__PURE__*/_jsxs(\"a\", {\n                              className: \"mt-3 mb-4 btn btn-sm\",\n                              href: 'https://github.com/' + element.login,\n                              target: \"_blank\",\n                              rel: \"noopener noreferrer\",\n                              style: {\n                                color: '#fff',\n                                paddingRight: 0\n                              },\n                              children: [element.login, \" \", /*#__PURE__*/_jsx(\"img\", {\n                                className: \"rounded-circle\",\n                                src: element.avatar_url,\n                                alt: \"Github\",\n                                width: \"24\",\n                                height: \"24\"\n                              })]\n                            })\n                          }, i), i === coAuthors.length - 1 ? /*#__PURE__*/_jsx(\"span\", {\n                            style: {\n                              opacity: 0.5\n                            },\n                            children: \")\"\n                          }) : /*#__PURE__*/_jsx(_Fragment, {\n                            children: /*#__PURE__*/_jsx(\"span\", {\n                              style: {\n                                opacity: 0.5\n                              },\n                              children: \", \"\n                            })\n                          })]\n                        });\n                      })]\n                    })\n                  }, i)\n                }, i)\n              })\n            })]\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"container\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"pt-md-5 pb-md-4 mx-auto\",\n            id: \"post\",\n            children: /*#__PURE__*/_jsx(\"div\", {\n              children: /*#__PURE__*/_jsx(ReactMarkdown, {\n                source: element.body\n              })\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"text-center\",\n            children: element.labels && element.labels.map(function (element2, i) {\n              if (element2.name !== 'post' && element2.name !== 'highlight') {\n                return /*#__PURE__*/_jsx(\"a\", {\n                  href: '/tag/' + element2.name,\n                  className: \"m-1 btn btn-primary\",\n                  style: {\n                    backgroundColor: '#' + element2.color,\n                    border: 'none'\n                  },\n                  children: element2.name\n                }, i);\n              }\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"mt-5 mb-5\"\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"row justify-content-center\",\n            children: [post && [post].map(function (element, i) {\n              var _element$user5, _element$user6, _element$user7;\n\n              return /*#__PURE__*/_jsx(\"div\", {\n                className: \"col-4 row justify-content-center\",\n                children: /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"align-self-center p-2\",\n                  children: [(_element$user5 = element.user) === null || _element$user5 === void 0 ? void 0 : _element$user5.login, /*#__PURE__*/_jsx(\"a\", {\n                    className: \"mt-3 mb-4 btn btn-sm\",\n                    href: 'https://github.com/' + ((_element$user6 = element.user) === null || _element$user6 === void 0 ? void 0 : _element$user6.login),\n                    target: \"_blank\",\n                    rel: \"noopener noreferrer\",\n                    style: {\n                      color: '#fff'\n                    },\n                    children: /*#__PURE__*/_jsx(\"img\", {\n                      className: \"rounded-circle\",\n                      src: (_element$user7 = element.user) === null || _element$user7 === void 0 ? void 0 : _element$user7.avatar_url,\n                      alt: \"Github\",\n                      width: \"24\",\n                      height: \"24\"\n                    })\n                  })]\n                })\n              }, i);\n            }), coAuthors && coAuthors.map(function (element, i) {\n              return /*#__PURE__*/_jsx(\"div\", {\n                className: \"col-4 row justify-content-center\",\n                children: /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"align-self-center p-2\",\n                  children: [element.login, /*#__PURE__*/_jsx(\"a\", {\n                    className: \"mt-3 mb-4 btn btn-sm\",\n                    href: 'https://github.com/' + element.login,\n                    target: \"_blank\",\n                    rel: \"noopener noreferrer\",\n                    style: {\n                      color: '#fff'\n                    },\n                    children: /*#__PURE__*/_jsx(\"img\", {\n                      className: \"rounded-circle\",\n                      src: element.avatar_url,\n                      alt: \"Github\",\n                      width: \"24\",\n                      height: \"24\"\n                    })\n                  })]\n                })\n              }, i);\n            })]\n          }), comments && comments.map(function (element2, i) {\n            var _element2$user, _element2$user2, _element2$user3, _element$user8, _element2$user4, _element$user9;\n\n            var user = /*#__PURE__*/_jsx(\"div\", {\n              className: \"col-1 text-center\",\n              style: {\n                zIndex: 1\n              },\n              children: /*#__PURE__*/_jsx(\"img\", {\n                className: \"m-3 rounded-circle\",\n                src: (_element2$user = element2.user) === null || _element2$user === void 0 ? void 0 : _element2$user.avatar_url,\n                alt: \"User\",\n                width: \"35\",\n                height: \"35\"\n              })\n            });\n\n            var comment = /*#__PURE__*/_jsx(\"div\", {\n              className: \"col-11\",\n              children: /*#__PURE__*/_jsxs(\"div\", {\n                className: \"card mt-3 mb-3\",\n                children: [/*#__PURE__*/_jsx(\"div\", {\n                  className: \"card-header\",\n                  children: /*#__PURE__*/_jsxs(\"div\", {\n                    children: [\"Posted on \", getDate(element2.created_at), \" by \", (_element2$user2 = element2.user) === null || _element2$user2 === void 0 ? void 0 : _element2$user2.login]\n                  })\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  className: \"card-body\",\n                  children: /*#__PURE__*/_jsx(ReactMarkdown, {\n                    source: element2.body\n                  })\n                })]\n              })\n            });\n\n            return /*#__PURE__*/_jsxs(\"div\", {\n              className: \"row justify-content-center\",\n              children: [i === 0 ? /*#__PURE__*/_jsxs(_Fragment, {\n                children: [/*#__PURE__*/_jsx(\"hr\", {\n                  className: \"mt-5 mb-5\"\n                }), /*#__PURE__*/_jsx(\"h4\", {\n                  children: \"Comments:\"\n                })]\n              }) : /*#__PURE__*/_jsx(_Fragment, {}), /*#__PURE__*/_jsx(\"div\", {\n                className: \"px-3 mx-auto row\",\n                id: \"comments\",\n                children: /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"row col-12\",\n                  children: [((_element2$user3 = element2.user) === null || _element2$user3 === void 0 ? void 0 : _element2$user3.login) === ((_element$user8 = element.user) === null || _element$user8 === void 0 ? void 0 : _element$user8.login) ? user : comment, ((_element2$user4 = element2.user) === null || _element2$user4 === void 0 ? void 0 : _element2$user4.login) === ((_element$user9 = element.user) === null || _element$user9 === void 0 ? void 0 : _element$user9.login) ? comment : user]\n                })\n              }, i)]\n            }, i);\n          }), relatedPosts && relatedPosts.map(function (element2, i) {\n            var postElement = getElement('post', element2);\n            return /*#__PURE__*/_jsxs(\"div\", {\n              className: \"row justify-content-center\",\n              children: [i === 0 ? /*#__PURE__*/_jsxs(_Fragment, {\n                children: [/*#__PURE__*/_jsx(\"hr\", {\n                  className: \"mt-5 mb-5\"\n                }), /*#__PURE__*/_jsxs(\"h4\", {\n                  className: \"col-12 mt-5 mb-5\",\n                  children: [\"More from \", element2.user.login, \":\"]\n                })]\n              }) : /*#__PURE__*/_jsx(_Fragment, {}), getCard(i, postElement, hoverElement, setHoverElement)]\n            }, i);\n          })]\n        })]\n      });\n    })\n  });\n};\n\nexport default post;","map":null,"metadata":{},"sourceType":"module"}