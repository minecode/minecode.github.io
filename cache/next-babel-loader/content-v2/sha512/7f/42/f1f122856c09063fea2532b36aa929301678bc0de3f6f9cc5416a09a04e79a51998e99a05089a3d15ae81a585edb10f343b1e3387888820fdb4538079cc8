{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useEffect, useState } from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport { getDate, getCard, getHeader, getElement, getDiffDates } from '../../../components/Utils';\nimport { faStar, faCertificate } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { useFetch } from '../../../hooks/useFetch';\nimport { useRouter } from 'next/router';\n\nconst post = () => {\n  const router = useRouter();\n  const {\n    id\n  } = router.query;\n  const {\n    0: post,\n    1: setPost\n  } = useState(null);\n  const {\n    0: relatedPosts,\n    1: setRelatedPosts\n  } = useState(null);\n  const {\n    0: bannerImage,\n    1: setBannerImage\n  } = useState(null);\n  const {\n    0: coAuthors,\n    1: setCoAuthors\n  } = useState(null);\n  const {\n    0: hoverElement,\n    1: setHoverElement\n  } = useState(null);\n  const {\n    data: comments\n  } = useFetch('repos/minecode/minecode.github.io/issues/' + router.query.id + '/comments');\n  useEffect(() => {\n    if (id != undefined) {\n      var fetchApi = async () => {\n        var _postJson$body, _postJson$body2, _postJson$assignees;\n\n        var header = getHeader();\n        const postJson = await fetch('https://minecode.herokuapp.com/github/repos/minecode/minecode.github.io/issues/' + id, {\n          method: 'GET',\n          headers: header\n        }).then(res => res.json()).then(data => {\n          setPost(data);\n          return data;\n        });\n        const members = await fetch('https://minecode.herokuapp.com/github/orgs/minecode/members', {\n          method: 'GET',\n          headers: header\n        });\n        const membersJson = await members.json();\n        const authorizedUsers = membersJson.map(function (element) {\n          return element.login;\n        });\n        const otherIssues = await fetch('https://minecode.herokuapp.com/github/repos/minecode/minecode.github.io/issues/closed', {\n          method: 'GET',\n          headers: header\n        });\n        const otherIssuesJson = await otherIssues.json();\n        const relatedPosts = otherIssuesJson.filter(element => {\n          var _element$user, _postJson$user, _element$closed_by;\n\n          return ((_element$user = element.user) === null || _element$user === void 0 ? void 0 : _element$user.login) === ((_postJson$user = postJson.user) === null || _postJson$user === void 0 ? void 0 : _postJson$user.login) && element.labels.filter(filter => filter.name === 'post').length > 0 && element.id !== postJson.id && authorizedUsers.includes((_element$closed_by = element.closed_by) === null || _element$closed_by === void 0 ? void 0 : _element$closed_by.login);\n        });\n        setRelatedPosts(relatedPosts);\n        const bannerImage = (_postJson$body = postJson.body) !== null && _postJson$body !== void 0 && _postJson$body.match(/(?:!\\[(.*?)\\]\\((.*?)\\))/g) ? (_postJson$body2 = postJson.body) === null || _postJson$body2 === void 0 ? void 0 : _postJson$body2.match(/(?:!\\[(.*?)\\]\\((.*?)\\))/g)[0].split('(')[1].split(')')[0] : null;\n        setBannerImage(bannerImage);\n        const coAuthors = (_postJson$assignees = postJson.assignees) === null || _postJson$assignees === void 0 ? void 0 : _postJson$assignees.filter(element => {\n          var _postJson$user2;\n\n          return element.login !== ((_postJson$user2 = postJson.user) === null || _postJson$user2 === void 0 ? void 0 : _postJson$user2.login);\n        });\n        setCoAuthors(coAuthors);\n      };\n\n      fetchApi();\n    }\n  }, [id]);\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: post && [post].map((element, i) => {\n      var _element$title, _element$labels, _element$user2, _element$user3, _element$user4;\n\n      return /*#__PURE__*/_jsxs(_Fragment, {\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          style: {\n            boxSizing: 'border-box',\n            position: 'relative',\n            height: '400px',\n            width: '100%',\n            overflow: 'hidden'\n          },\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"container-fluid\",\n            id: \"content\",\n            style: {\n              backgroundImage: `url(${bannerImage})`,\n              backgroundSize: 'cover',\n              backgroundRepeat: 'no-repeat',\n              backgroundPosition: 'center',\n              filter: 'blur(8px)',\n              height: '100%',\n              width: '100%',\n              position: 'absolute'\n            }\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"container-fluid\",\n            style: {\n              backgroundColor: 'rgb(0,0,0,0.5)',\n              color: 'white',\n              fontWeight: 'bold',\n              zIndex: 2,\n              height: '100%',\n              width: '100%',\n              textAlign: 'center',\n              position: 'relative'\n            },\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \"pricing-header px-3 py-3 mx-auto text-center\",\n              id: \"title\",\n              children: /*#__PURE__*/_jsxs(\"h1\", {\n                className: \"display-4\",\n                style: {\n                  color: '#fff',\n                  marginTop: '5%'\n                },\n                children: [(_element$title = element.title) === null || _element$title === void 0 ? void 0 : _element$title.split(/\\[\\w*\\] /)[1], /*#__PURE__*/_jsx(\"br\", {}), ((_element$labels = element.labels) === null || _element$labels === void 0 ? void 0 : _element$labels.filter(e => e.name === 'highlight').length) > 0 ? /*#__PURE__*/_jsx(_Fragment, {\n                  children: /*#__PURE__*/_jsxs(\"div\", {\n                    className: \"m-1 btn btn-outline-light btn-sm bordered\",\n                    children: [/*#__PURE__*/_jsx(FontAwesomeIcon, {\n                      icon: faStar\n                    }), ' ', \"Destaque\"]\n                  })\n                }) : /*#__PURE__*/_jsx(_Fragment, {}), getDiffDates(new Date(element.closed_at), new Date()) <= 2 ? /*#__PURE__*/_jsx(_Fragment, {\n                  children: /*#__PURE__*/_jsxs(\"div\", {\n                    className: \"m-1 btn btn-outline-light btn-sm bordered\",\n                    children: [/*#__PURE__*/_jsx(FontAwesomeIcon, {\n                      icon: faCertificate\n                    }), ' ', \"Novo\"]\n                  })\n                }) : /*#__PURE__*/_jsx(_Fragment, {})]\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"px-3 py-3 pb-md-4 mx-auto text-center\",\n              children: /*#__PURE__*/_jsx(\"div\", {\n                className: \"d-flex align-middle justify-content-center align-items-center\",\n                children: /*#__PURE__*/_jsx(\"div\", {\n                  className: \"row\",\n                  children: /*#__PURE__*/_jsx(\"div\", {\n                    className: \"align-self-center p-2\",\n                    id: \"infoPost\",\n                    children: /*#__PURE__*/_jsxs(\"p\", {\n                      style: {\n                        color: '#fff',\n                        fontSize: 16\n                      },\n                      children: [\"Posted on \", getDate(element.created_at), \" by\", /*#__PURE__*/_jsxs(\"a\", {\n                        className: \"mt-3 mb-4 btn btn-sm\",\n                        href: 'https://github.com/' + ((_element$user2 = element.user) === null || _element$user2 === void 0 ? void 0 : _element$user2.login),\n                        target: \"_blank\",\n                        rel: \"noopener noreferrer\",\n                        style: {\n                          color: '#fff'\n                        },\n                        children: [(_element$user3 = element.user) === null || _element$user3 === void 0 ? void 0 : _element$user3.login, \" \", /*#__PURE__*/_jsx(\"img\", {\n                          className: \"rounded-circle\",\n                          src: (_element$user4 = element.user) === null || _element$user4 === void 0 ? void 0 : _element$user4.avatar_url,\n                          alt: \"Github\",\n                          width: \"24\",\n                          height: \"24\"\n                        })]\n                      }), coAuthors && coAuthors !== undefined && coAuthors.length > 0 && coAuthors.map((element, i) => {\n                        return /*#__PURE__*/_jsxs(_Fragment, {\n                          children: [i === 0 ? /*#__PURE__*/_jsx(\"span\", {\n                            style: {\n                              opacity: 0.5\n                            },\n                            children: \"(\"\n                          }) : /*#__PURE__*/_jsx(_Fragment, {}), /*#__PURE__*/_jsx(\"span\", {\n                            style: {\n                              opacity: 0.5\n                            },\n                            children: /*#__PURE__*/_jsxs(\"a\", {\n                              className: \"mt-3 mb-4 btn btn-sm\",\n                              href: 'https://github.com/' + element.login,\n                              target: \"_blank\",\n                              rel: \"noopener noreferrer\",\n                              style: {\n                                color: '#fff',\n                                paddingRight: 0\n                              },\n                              children: [element.login, \" \", /*#__PURE__*/_jsx(\"img\", {\n                                className: \"rounded-circle\",\n                                src: element.avatar_url,\n                                alt: \"Github\",\n                                width: \"24\",\n                                height: \"24\"\n                              })]\n                            })\n                          }, i), i === coAuthors.length - 1 ? /*#__PURE__*/_jsx(\"span\", {\n                            style: {\n                              opacity: 0.5\n                            },\n                            children: \")\"\n                          }) : /*#__PURE__*/_jsx(_Fragment, {\n                            children: /*#__PURE__*/_jsx(\"span\", {\n                              style: {\n                                opacity: 0.5\n                              },\n                              children: \", \"\n                            })\n                          })]\n                        });\n                      })]\n                    })\n                  }, i)\n                }, i)\n              })\n            })]\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"container\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"pt-md-5 pb-md-4 mx-auto\",\n            id: \"post\",\n            children: /*#__PURE__*/_jsx(\"div\", {\n              children: /*#__PURE__*/_jsx(ReactMarkdown, {\n                source: element.body\n              })\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"text-center\",\n            children: element.labels && element.labels.map((element2, i) => {\n              if (element2.name !== 'post' && element2.name !== 'highlight') {\n                return /*#__PURE__*/_jsx(\"a\", {\n                  href: '/tag/' + element2.name,\n                  className: \"m-1 btn btn-primary\",\n                  style: {\n                    backgroundColor: '#' + element2.color,\n                    border: 'none'\n                  },\n                  children: element2.name\n                }, i);\n              }\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"mt-5 mb-5\"\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"row justify-content-center\",\n            children: [post && [post].map((element, i) => {\n              var _element$user5, _element$user6, _element$user7;\n\n              return /*#__PURE__*/_jsx(\"div\", {\n                className: \"col-4 row justify-content-center\",\n                children: /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"align-self-center p-2\",\n                  children: [(_element$user5 = element.user) === null || _element$user5 === void 0 ? void 0 : _element$user5.login, /*#__PURE__*/_jsx(\"a\", {\n                    className: \"mt-3 mb-4 btn btn-sm\",\n                    href: 'https://github.com/' + ((_element$user6 = element.user) === null || _element$user6 === void 0 ? void 0 : _element$user6.login),\n                    target: \"_blank\",\n                    rel: \"noopener noreferrer\",\n                    style: {\n                      color: '#fff'\n                    },\n                    children: /*#__PURE__*/_jsx(\"img\", {\n                      className: \"rounded-circle\",\n                      src: (_element$user7 = element.user) === null || _element$user7 === void 0 ? void 0 : _element$user7.avatar_url,\n                      alt: \"Github\",\n                      width: \"24\",\n                      height: \"24\"\n                    })\n                  })]\n                })\n              }, i);\n            }), coAuthors && coAuthors.map((element, i) => {\n              return /*#__PURE__*/_jsx(\"div\", {\n                className: \"col-4 row justify-content-center\",\n                children: /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"align-self-center p-2\",\n                  children: [element.login, /*#__PURE__*/_jsx(\"a\", {\n                    className: \"mt-3 mb-4 btn btn-sm\",\n                    href: 'https://github.com/' + element.login,\n                    target: \"_blank\",\n                    rel: \"noopener noreferrer\",\n                    style: {\n                      color: '#fff'\n                    },\n                    children: /*#__PURE__*/_jsx(\"img\", {\n                      className: \"rounded-circle\",\n                      src: element.avatar_url,\n                      alt: \"Github\",\n                      width: \"24\",\n                      height: \"24\"\n                    })\n                  })]\n                })\n              }, i);\n            })]\n          }), comments && comments.map((element2, i) => {\n            var _element2$user, _element2$user2, _element2$user3, _element$user8, _element2$user4, _element$user9;\n\n            var user = /*#__PURE__*/_jsx(\"div\", {\n              className: \"col-1 text-center\",\n              style: {\n                zIndex: 1\n              },\n              children: /*#__PURE__*/_jsx(\"img\", {\n                className: \"m-3 rounded-circle\",\n                src: (_element2$user = element2.user) === null || _element2$user === void 0 ? void 0 : _element2$user.avatar_url,\n                alt: \"User\",\n                width: \"35\",\n                height: \"35\"\n              })\n            });\n\n            var comment = /*#__PURE__*/_jsx(\"div\", {\n              className: \"col-11\",\n              children: /*#__PURE__*/_jsxs(\"div\", {\n                className: \"card mt-3 mb-3\",\n                children: [/*#__PURE__*/_jsx(\"div\", {\n                  className: \"card-header\",\n                  children: /*#__PURE__*/_jsxs(\"div\", {\n                    children: [\"Posted on \", getDate(element2.created_at), \" by \", (_element2$user2 = element2.user) === null || _element2$user2 === void 0 ? void 0 : _element2$user2.login]\n                  })\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  className: \"card-body\",\n                  children: /*#__PURE__*/_jsx(ReactMarkdown, {\n                    source: element2.body\n                  })\n                })]\n              })\n            });\n\n            return /*#__PURE__*/_jsxs(\"div\", {\n              className: \"row justify-content-center\",\n              children: [i === 0 ? /*#__PURE__*/_jsxs(_Fragment, {\n                children: [/*#__PURE__*/_jsx(\"hr\", {\n                  className: \"mt-5 mb-5\"\n                }), /*#__PURE__*/_jsx(\"h4\", {\n                  children: \"Comments:\"\n                })]\n              }) : /*#__PURE__*/_jsx(_Fragment, {}), /*#__PURE__*/_jsx(\"div\", {\n                className: \"px-3 mx-auto row\",\n                id: \"comments\",\n                children: /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"row col-12\",\n                  children: [((_element2$user3 = element2.user) === null || _element2$user3 === void 0 ? void 0 : _element2$user3.login) === ((_element$user8 = element.user) === null || _element$user8 === void 0 ? void 0 : _element$user8.login) ? user : comment, ((_element2$user4 = element2.user) === null || _element2$user4 === void 0 ? void 0 : _element2$user4.login) === ((_element$user9 = element.user) === null || _element$user9 === void 0 ? void 0 : _element$user9.login) ? comment : user]\n                })\n              }, i)]\n            }, i);\n          }), relatedPosts && relatedPosts.map((element2, i) => {\n            const postElement = getElement('post', element2);\n            return /*#__PURE__*/_jsxs(\"div\", {\n              className: \"row justify-content-center\",\n              children: [i === 0 ? /*#__PURE__*/_jsxs(_Fragment, {\n                children: [/*#__PURE__*/_jsx(\"hr\", {\n                  className: \"mt-5 mb-5\"\n                }), /*#__PURE__*/_jsxs(\"h4\", {\n                  className: \"col-12 mt-5 mb-5\",\n                  children: [\"More from \", element2.user.login, \":\"]\n                })]\n              }) : /*#__PURE__*/_jsx(_Fragment, {}), getCard(i, postElement, hoverElement, setHoverElement)]\n            }, i);\n          })]\n        })]\n      });\n    })\n  });\n};\n\nexport default post;","map":null,"metadata":{},"sourceType":"module"}